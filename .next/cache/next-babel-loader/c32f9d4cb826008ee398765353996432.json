{"ast":null,"code":"var _jsxFileName = \"/home/ruchika/Desktop/Testing3/Screencast/components/GoogleLog.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport GoogleLogin from \"react-google-login\";\nimport axios from \"axios\";\nimport Button from \"@material-ui/core/Button\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { SocialMediaIconsReact } from 'social-media-icons-react';\nimport Router from \"next/router\";\nimport AnsAlert from \"../components/AnsAlert\"; // import data from '../env.json';\n\nvar useStyles = function useStyles(theme) {\n  return {\n    root: {\n      \"& > *\": {\n        margin: theme.spacing(0)\n      }\n    }\n  };\n};\n\nfunction GoogleLog(props) {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState({}),\n      userDetails = _useState[0],\n      setUserDetails = _useState[1],\n      _useState2 = useState(false),\n      isUserLoggedIn = _useState2[0],\n      setIsUserLoggedIn = _useState2[1],\n      _useState3 = useState(\"\"),\n      access = _useState3[0],\n      setAccess = _useState3[1],\n      _useState4 = useState(false),\n      result = _useState4[0],\n      setResult = _useState4[1]; //  const classes = useStyles();\n\n\n  useEffect(function () {\n    if (localStorage.getItem('day') == 3 && localStorage.getItem('end') < Date.now()) Router.push('/finale');else {\n      if (localStorage.getItem(\"email\")) {\n        setIsUserLoggedIn({\n          isUserLoggedIn: true\n        }, function () {});\n      }\n    }\n  }, []);\n\n  var responseGoogle = function responseGoogle(response) {\n    console.log(response);\n    axios.post(process.env.api + \"/api/googlelogin\", {\n      token: response.tokenObj.id_token\n    }).then(function (res) {\n      localStorage.setItem('token', res.data.access_token); //localStorage.setItem('ref_token', res.data.refresh_token)\n\n      localStorage.setItem(\"email\", response.profileObj.email);\n      localStorage.setItem(\"name\", response.profileObj.name);\n      localStorage.setItem(\"image\", response.profileObj.imageUrl);\n      setResult(res.data.quiz_finished);\n      setAccess(res.data.access_token);\n      setUserDetails(response.profileObj);\n      setIsUserLoggedIn(true);\n\n      if (localStorage.getItem('start') <= Date.now()) {\n        if (!res.data.quiz_finished && localStorage.getItem('end') > Date.now()) {\n          console.log(\"game\");\n          Router.push('/dashboard');\n        } else if (res.data.quiz_finished && localStorage.getItem('end') > Date.now()) {\n          console.log(\"finale\");\n          Router.push('/finale');\n        } else if (res.data.error === \"No active quizes\") {\n          Router.push('/finale');\n        } else {\n          Router.push('/error');\n        }\n      } else Router.reload();\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  };\n\n  var classes = props.classes;\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, !isUserLoggedIn && __jsx(GoogleLogin, {\n    clientId: \"868193229049-r3rkp0lue3f4hk4g0d0c4h418d63mbmb.apps.googleusercontent.com\",\n    render: function render(renderProps) {\n      return __jsx(\"div\", {\n        className: classes.root,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }\n      }, __jsx(Button, {\n        style: {\n          backgroundColor: \"rgba(0,0,0,0)\",\n          padding: \"0\"\n        },\n        variant: \"contained\",\n        color: \"secondary\",\n        className: \"button\",\n        disableElevation: true,\n        onClick: renderProps.onClick,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 19\n        }\n      }, __jsx(SocialMediaIconsReact, {\n        borderColor: \"rgba(0,0,0,0.25)\",\n        borderWidth: \"4\",\n        borderStyle: \"inset\",\n        icon: \"googleplus\",\n        iconColor: \"rgba(0,0,0,1)\",\n        backgroundColor: \"rgba(21, 234, 248, 1)\",\n        iconSize: \"7\",\n        roundness: \"50%\",\n        size: \"53\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }\n      })));\n    },\n    onSuccess: responseGoogle //isSignedIn ??\n    ,\n    onFailure: responseGoogle //handle later\n    ,\n    cookiePolicy: \"single_host_origin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  })));\n}\n\n_s(GoogleLog, \"udWV6t5CUHYwjy4cF+0vYpY5qyI=\");\n\n_c = GoogleLog;\nexport default withStyles(useStyles)(GoogleLog);\n\nvar _c;\n\n$RefreshReg$(_c, \"GoogleLog\");","map":{"version":3,"sources":["/home/ruchika/Desktop/Testing3/Screencast/components/GoogleLog.js"],"names":["React","useState","useEffect","GoogleLogin","axios","Button","withStyles","SocialMediaIconsReact","Router","AnsAlert","useStyles","theme","root","margin","spacing","GoogleLog","props","userDetails","setUserDetails","isUserLoggedIn","setIsUserLoggedIn","access","setAccess","result","setResult","localStorage","getItem","Date","now","push","responseGoogle","response","console","log","post","process","env","api","token","tokenObj","id_token","then","res","setItem","data","access_token","profileObj","email","name","imageUrl","quiz_finished","error","reload","err","classes","renderProps","backgroundColor","padding","onClick"],"mappings":"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","sourcesContent":["\n\nimport React, {useState,useEffect} from \"react\";\nimport GoogleLogin from \"react-google-login\";\nimport axios from \"axios\";\nimport Button from \"@material-ui/core/Button\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { SocialMediaIconsReact } from 'social-media-icons-react';\nimport Router from \"next/router\";\nimport AnsAlert from \"../components/AnsAlert\"\n// import data from '../env.json';\n\n\nconst useStyles = (theme) => ({\n  root: {\n    \"& > *\": {\n      margin: theme.spacing(0),\n    },\n  },\n});\n\n function GoogleLog(props) {\n  \n       const [userDetails,setUserDetails]= useState({}),\n       [isUserLoggedIn,setIsUserLoggedIn]=useState(false),\n       [access,setAccess]=useState(\"\"),\n       [result,setResult]=useState(false)\n      //  const classes = useStyles();\n\n    \n  \n\n      useEffect (() => {\n    if (localStorage.getItem('day') == 3 && localStorage.getItem('end') < Date.now()) Router.push('/finale')\n    else {\n      if (localStorage.getItem(\"email\")) {\n        setIsUserLoggedIn({isUserLoggedIn:true} , () => {\n        })\n      }\n    }\n  },[]);\n\n  const responseGoogle = (response) => {\n    console.log(response);\n    axios\n      .post(process.env.api + \"/api/googlelogin\", {\n        token: response.tokenObj.id_token\n      })\n      .then((res) => {\n        localStorage.setItem('token', res.data.access_token)\n        //localStorage.setItem('ref_token', res.data.refresh_token)\n        localStorage.setItem(\"email\", response.profileObj.email);\n        localStorage.setItem(\"name\", response.profileObj.name);\n        localStorage.setItem(\"image\", response.profileObj.imageUrl);\n\n         setResult(res.data.quiz_finished)\n           setAccess(res.data.access_token) \n           setUserDetails(response.profileObj) \n           setIsUserLoggedIn(true) \n           if ((localStorage.getItem('start') <= Date.now())) {\n            if (!(res.data.quiz_finished) && localStorage.getItem('end') > Date.now()){\n              console.log(\"game\");\n              Router.push('/dashboard')\n            }\n             \n            else if (res.data.quiz_finished && localStorage.getItem('end') > Date.now()) {\n                console.log(\"finale\");\n              Router.push('/finale')\n            }\n            else if((res.data.error) === \"No active quizes\"){\n              Router.push('/finale')\n            }\n            else { \n              Router.push('/error')\n            }\n          }\n          else\n            Router.reload();\n            \n          \n        \n      })\n      .catch((err) => {\n        console.log(err)\n      });\n  };\n\n\n  \n    const { classes } = props;\n    return (\n      <div>\n        <div>\n          {!isUserLoggedIn && (\n            <GoogleLogin\n              clientId=\"868193229049-r3rkp0lue3f4hk4g0d0c4h418d63mbmb.apps.googleusercontent.com\"\n              render={(renderProps) => (\n                <div className={classes.root}  >\n\n                  <Button\n                    style={{ backgroundColor: \"rgba(0,0,0,0)\", padding: \"0\" }}\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    className=\"button\"\n                    disableElevation={true}\n                    onClick={renderProps.onClick}\n\n                  >\n                    <SocialMediaIconsReact borderColor=\"rgba(0,0,0,0.25)\" borderWidth=\"4\" borderStyle=\"inset\" icon=\"googleplus\" iconColor=\"rgba(0,0,0,1)\" backgroundColor=\"rgba(21, 234, 248, 1)\" iconSize=\"7\" roundness=\"50%\" size=\"53\" />\n                  </Button>\n                </div>\n              )}\n              onSuccess={responseGoogle} //isSignedIn ??\n              onFailure={responseGoogle} //handle later\n\n              cookiePolicy={\"single_host_origin\"}\n            />\n          )}\n        </div>\n      </div>\n\n    );\n  \n}\n\nexport default withStyles(useStyles)(GoogleLog);"]},"metadata":{},"sourceType":"module"}