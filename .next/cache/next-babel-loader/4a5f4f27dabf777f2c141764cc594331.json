{"ast":null,"code":"var _jsxFileName = \"/home/ruchika/Desktop/TDOC/Screencast/pages/game.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n// import axios from \"axios\";\n// import React from \"react\";\n// import Question from \"../components/Question\";\n// import Hint from \"../components/Hint\";\n// import AnsAlert from \"../components/AnsAlert\";\n// import Answer from \"../components/Answer\";\n// import Router from \"next/router\";\n// import data from '../env.json';\n// import Layout from \"../components/Layout\";\n// import Loader from \"../components/Loader\";\n// class game extends React.Component {\n//   constructor(props) {\n//     super(props);\n//     this.state = {\n//       answer: \"\",\n//       questions: \"\",\n//       qsNo: 1,\n//       audio: \"\",\n//       image: \"\",\n//       isLoggedIn: false,\n//       hint: \"\",\n//       day: \"\",\n//       end: \"\",\n//       message: \"\",\n//       v: \"\",\n//       loaded: false,\n//     };\n//     this.submit = this.submit.bind(this);\n//     // this.submit2 = this.submit2.bind(this);\n//     this.change = this.change.bind(this);\n//     this.checkAns = this.checkAns.bind(this);\n//     this.getQuestions = this.getQuestions.bind(this);\n//   }\n//   componentDidMount() {\n//     axios\n//       .get(process.env.api + \"/api/status\")\n//       .then((response) => {\n//         var temp3 = new Date(response.data.start_time);\n//         let temp2 = new Date(response.data.end_time);\n//         localStorage.setItem('end', temp2.getTime() + (temp2.getTimezoneOffset() * 60000))\n//         localStorage.setItem(\"start\", temp3.getTime() + (temp3.getTimezoneOffset() * 60000));\n//         let temp = localStorage.getItem('end') - Date.now();\n//         localStorage.setItem(\"day\", response.data.current_day);\n//         this.setState({\n//           v: setTimeout(function () {\n//             AnsAlert(9);\n//             if (localStorage.getItem('day') === 3) {\n//               Router.push('/finale')\n//             }\n//             else if(response.data.error){\n//               Router.push('/error')\n//             }\n//             else {\n//               Router.push('/finale');\n//             }\n//           }, temp)\n//         })\n//         this.setState({ day: localStorage.getItem('day'), end: localStorage.getItem('end') }, () => {\n//           if (localStorage.getItem('day') == 3 && (localStorage.getItem('end') < Date.now()))\n//             Router.push('/finale')\n//           if (!(localStorage.getItem(\"email\"))) {\n//             AnsAlert(8)\n//             Router.push('/');\n//           }\n//           else if (!(localStorage.getItem('start') <= Date.now())) {\n//             // AnsAlert(8)\n//             Router.push(\"/\");\n//           }\n//           else {\n//             this.getQuestions();\n//           }\n//         });\n//       })\n//       .catch(err => {\n//         console.log(err)\n//         Router.push('/error')\n//       });\n//   }\n//   getQuestions() {\n//     axios\n//       .get(process.env.api + \"/api/question\", {\n//         headers: {\n//           Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n//         },\n//       })\n//       .then((response) => {\n//         if (response.data.quiz_finished) {\n//           clearTimeout(this.state.v);\n//           Router.push(\"/finale\");\n//         }\n//         this.setState((prevState) => {\n//           return {\n//             ...prevState,\n//             questions: response.data.question,\n//             hint: response.data.hint,\n//             qsNo: response.data.question_no,\n//             audio: response.data.audio,\n//             image: response.data.image\n//           };\n//         });\n//         window.scrollTo(0, 0);\n//         window.scrollTo({\n//           top: 0,\n//           behavior: \"smooth\"\n//         });\n//         this.setState({ loaded: true });\n//       })\n//       .catch(err => {\n//         console.log(err)\n//         Router.push('/error')\n//       });\n//   }\n//   submit = (event) => {\n//     //send final answer for checking\n//     event.preventDefault()\n//     this.checkAns(this.state.answer);\n//     this.setState((prevState) => {\n//       return { ...prevState, answer: \"\" };\n//     });\n//   };\n//   // submit2 = () => {\n//   //   //send final answer for checking\n//   //   console.log(this.state.answer);\n//   //   this.checkAns(this.state.answer);\n//   // };\n//   change = (event) => {\n//     //keep updating answer\n//     let e = event.target.value;\n//     this.setState((prevState) => {\n//       return { ...prevState, answer: e };\n//     });\n//   };\n//   checkAns(\n//     ans //check answer from api and send for correct alert\n//   ) {\n//     axios\n//       .post(\n//         process.env.api + \"/api/checkanswer\",\n//         { answer: ans },\n//         {\n//           headers: {\n//             Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n//           },\n//         }\n//       )\n//       .then((response) => {\n//         let r = response.data.result;\n//         if (r && !response.data.quiz_finished) {\n//           this.setState((prevState) => {\n//             return { ...prevState, qsNo: prevState.qsNo + 1, answer: \"\" };\n//           });\n//           AnsAlert(1);\n//           this.setState({\n//             answer: \"\"\n//           });\n//           this.getQuestions();\n//         } else if (r && response.data.quiz_finished) {\n//           AnsAlert(1);\n//           clearTimeout(this.state.v);\n//           Router.push(\"/finale\");\n//         } else {\n//           this.setState({\n//             answer: \"\"\n//           });\n//           AnsAlert(0);\n//         }\n//       });\n//   }\n//   render() {\n//     return (\n//       <>\n//         { (this.state.loaded === true) ?\n//           <Layout>\n//             <div\n//               style={{ marginRight: \"auto\", marginLeft: \"auto\", textAlign: \"center\", minHeight: \"100vh-100px\" }}\n//               questions\n//             >\n//               <Question qs={this.state.questions} qsNo={this.state.qsNo} audio={this.state.audio} image={this.state.image} day={this.state.day} />\n//               <div>\n//                 <Answer\n//                   change={this.change}\n//                   answer={this.state.answer}\n//                   submit={this.submit}\n//                 />\n//                 <Hint hint={this.state.hint}\n//                   submit={this.submit}\n//                 // submit2={this.submit2}\n//                 />\n//                 <style jsx>{`\n//             div {\n//               text-align: center;\n//               margin: 5px;\n//               margin-bottom:100px;\n//             }\n//           `}</style>\n//               </div>\n//               <div className='footerBuff'>\n//               </div>\n//             </div>\n//           </Layout>\n//           : <Loader />}\n//       </>\n//     );\n//   }\n// }\n// export default game;\nimport axios from \"axios\";\nimport React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport Question from \"../components/Question\";\nimport Hint from \"../components/Hint\";\nimport AnsAlert from \"../components/AnsAlert\";\nimport Answer from \"../components/Answer\";\nimport Router from \"next/router\"; // import data from '../env.json';\n\nimport Layout from \"../components/Layout\";\nimport Loader from \"../components/Loader\";\nexport default function game() {\n  const {\n    0: answer,\n    1: setAnswer\n  } = useState(\"\"),\n        {\n    0: questions,\n    1: setQuestions\n  } = useState(\"\"),\n        {\n    0: qsNo,\n    1: setQsNo\n  } = useState(1),\n        {\n    0: audio,\n    1: setAudio\n  } = useState(\"\"),\n        {\n    0: image,\n    1: setImage\n  } = useState(\"\"),\n        {\n    0: isLoggedIn,\n    1: setIsLoggedIn\n  } = useState(false),\n        {\n    0: hint,\n    1: setHint\n  } = useState(\"\"),\n        {\n    0: day,\n    1: setDay\n  } = useState(\"\"),\n        {\n    0: end,\n    1: setEnd\n  } = useState(\"\"),\n        {\n    0: message,\n    1: setMessage\n  } = useState(\"\"),\n        {\n    0: v,\n    1: setV\n  } = useState(\"\"),\n        {\n    0: loaded,\n    1: setLoaded\n  } = useState(false); // this.submit = this.submit.bind(this);\n  // this.submit2 = this.submit2.bind(this);\n  // this.change = this.change.bind(this);\n  // this.checkAns = this.checkAns.bind(this);\n  // this.getQuestions = this.getQuestions.bind(this);\n\n  useEffect(() => {\n    axios.get(process.env.api + \"/api/status\").then(response => {\n      var temp3 = new Date(response.data.start_time);\n      let temp2 = new Date(response.data.end_time);\n      localStorage.setItem('end', temp2.getTime() + temp2.getTimezoneOffset() * 60000);\n      localStorage.setItem(\"start\", temp3.getTime() + temp3.getTimezoneOffset() * 60000);\n      let temp = localStorage.getItem('end') - Date.now();\n      localStorage.setItem(\"day\", response.data.current_day); // setV(setTimeout(function () {\n      //     AnsAlert(9);\n      //     if (localStorage.getItem('day') === 3) {\n      //       Router.push('/finale')\n      //     }\n      //     else if(response.data.error){\n      //       Router.push('/error')\n      //     }\n      //     else {\n      //       Router.push('/finale');\n      //     }\n      //   }, temp)\n      // )\n\n      setDay(localStorage.getItem('day'));\n      setEnd(localStorage.getItem('end'));\n\n      if (localStorage.getItem('day') == 3 && localStorage.getItem('end') < Date.now()) {\n        console.log(\"finale\");\n        Router.push('/finale');\n      }\n\n      if (!localStorage.getItem(\"email\")) {\n        console.log(\"9\");\n        AnsAlert(8);\n        Router.push('/');\n      } else if (!(localStorage.getItem('start') <= Date.now())) {\n        console.log(\"8\"); // AnsAlert(8)\n\n        Router.push(\"/\");\n      } else {\n        getQuestions();\n      }\n    }).catch(err => {\n      console.log(err);\n      Router.push('/error');\n    });\n  }, []);\n\n  const getQuestions = () => {\n    axios.get(process.env.api + \"/api/question\", {\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n      }\n    }).then(response => {\n      if (response.data.quiz_finished) {\n        clearTimeout(v);\n        Router.push(\"/finale\");\n      }\n\n      setQuestions(response.data.questions);\n      setHint(response.data.hint);\n      setQsNo(response.data.question_no);\n      setAudio(response.data.audio);\n      setImage(response.data.image);\n      window.scrollTo(0, 0);\n      window.scrollTo({\n        top: 0,\n        behavior: \"smooth\"\n      });\n      setLoaded(true);\n    }).catch(err => {\n      console.log(err);\n      Router.push('/error');\n    });\n  };\n\n  const submit = event => {\n    //send final answer for checking\n    event.preventDefault();\n    checkAns(answer);\n    setAnswer(\"\");\n  }; // submit2 = () => {\n  //   //send final answer for checking\n  //   console.log(this.state.answer);\n  //   this.checkAns(this.state.answer);\n  // };\n\n\n  const change = event => {\n    //keep updating answer\n    let e = event.target.value;\n    setAnswer(e);\n  }; //check answer from api and send for correct alert\n\n\n  const checkAns = ans => {\n    axios.post(process.env.api + \"/api/checkanswer\", {\n      answer: ans\n    }, {\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n      }\n    }).then(response => {\n      let r = response.data.result;\n\n      if (r && !response.data.quiz_finished) {\n        setQsNo(qsNo + 1);\n        setAnswer(\"\");\n        AnsAlert(1);\n        setAnswer(\"\");\n        getQuestions();\n      } else if (r && response.data.quiz_finished) {\n        AnsAlert(1);\n        clearTimeout(v);\n        Router.push(\"/finale\");\n      } else {\n        setAnswer(\"\");\n        AnsAlert(0);\n      }\n    });\n  };\n\n  return __jsx(React.Fragment, null, loaded === true ? __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    style: {\n      marginRight: \"auto\",\n      marginLeft: \"auto\",\n      textAlign: \"center\",\n      minHeight: \"100vh-100px\"\n    },\n    questions: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 13\n    }\n  }, __jsx(Question, {\n    qs: questions,\n    qsNo: qsNo,\n    audio: audio,\n    image: image,\n    day: day,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 15\n    }\n  }), __jsx(\"div\", {\n    className: \"jsx-4141458270\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 15\n    }\n  }, __jsx(Answer, {\n    change: change,\n    answer: answer,\n    submit: submit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 17\n    }\n  }), __jsx(Hint, {\n    hint: hint,\n    submit: submit // submit2={this.submit2}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 17\n    }\n  }), __jsx(_JSXStyle, {\n    id: \"4141458270\",\n    __self: this\n  }, \"div.jsx-4141458270{text-align:center;margin:5px;margin-bottom:100px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3J1Y2hpa2EvRGVza3RvcC9URE9DL1NjcmVlbmNhc3QvcGFnZXMvZ2FtZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEwWjRCLEFBR2lDLGtCQUNQLFdBQ1Esb0JBQ3JCIiwiZmlsZSI6Ii9ob21lL3J1Y2hpa2EvRGVza3RvcC9URE9DL1NjcmVlbmNhc3QvcGFnZXMvZ2FtZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcbi8vIGltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbi8vIGltcG9ydCBRdWVzdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9RdWVzdGlvblwiO1xuLy8gaW1wb3J0IEhpbnQgZnJvbSBcIi4uL2NvbXBvbmVudHMvSGludFwiO1xuLy8gaW1wb3J0IEFuc0FsZXJ0IGZyb20gXCIuLi9jb21wb25lbnRzL0Fuc0FsZXJ0XCI7XG4vLyBpbXBvcnQgQW5zd2VyIGZyb20gXCIuLi9jb21wb25lbnRzL0Fuc3dlclwiO1xuLy8gaW1wb3J0IFJvdXRlciBmcm9tIFwibmV4dC9yb3V0ZXJcIjtcbi8vIGltcG9ydCBkYXRhIGZyb20gJy4uL2Vudi5qc29uJztcbi8vIGltcG9ydCBMYXlvdXQgZnJvbSBcIi4uL2NvbXBvbmVudHMvTGF5b3V0XCI7XG4vLyBpbXBvcnQgTG9hZGVyIGZyb20gXCIuLi9jb21wb25lbnRzL0xvYWRlclwiO1xuXG4vLyBjbGFzcyBnYW1lIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbi8vICAgY29uc3RydWN0b3IocHJvcHMpIHtcbi8vICAgICBzdXBlcihwcm9wcyk7XG4vLyAgICAgdGhpcy5zdGF0ZSA9IHtcbi8vICAgICAgIGFuc3dlcjogXCJcIixcbi8vICAgICAgIHF1ZXN0aW9uczogXCJcIixcbi8vICAgICAgIHFzTm86IDEsXG4vLyAgICAgICBhdWRpbzogXCJcIixcbi8vICAgICAgIGltYWdlOiBcIlwiLFxuLy8gICAgICAgaXNMb2dnZWRJbjogZmFsc2UsXG4vLyAgICAgICBoaW50OiBcIlwiLFxuLy8gICAgICAgZGF5OiBcIlwiLFxuLy8gICAgICAgZW5kOiBcIlwiLFxuLy8gICAgICAgbWVzc2FnZTogXCJcIixcbi8vICAgICAgIHY6IFwiXCIsXG4vLyAgICAgICBsb2FkZWQ6IGZhbHNlLFxuLy8gICAgIH07XG5cbi8vICAgICB0aGlzLnN1Ym1pdCA9IHRoaXMuc3VibWl0LmJpbmQodGhpcyk7XG4vLyAgICAgLy8gdGhpcy5zdWJtaXQyID0gdGhpcy5zdWJtaXQyLmJpbmQodGhpcyk7XG4vLyAgICAgdGhpcy5jaGFuZ2UgPSB0aGlzLmNoYW5nZS5iaW5kKHRoaXMpO1xuLy8gICAgIHRoaXMuY2hlY2tBbnMgPSB0aGlzLmNoZWNrQW5zLmJpbmQodGhpcyk7XG4vLyAgICAgdGhpcy5nZXRRdWVzdGlvbnMgPSB0aGlzLmdldFF1ZXN0aW9ucy5iaW5kKHRoaXMpO1xuLy8gICB9XG5cbi8vICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4vLyAgICAgYXhpb3Ncbi8vICAgICAgIC5nZXQocHJvY2Vzcy5lbnYuYXBpICsgXCIvYXBpL3N0YXR1c1wiKVxuLy8gICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4vLyAgICAgICAgIHZhciB0ZW1wMyA9IG5ldyBEYXRlKHJlc3BvbnNlLmRhdGEuc3RhcnRfdGltZSk7XG4vLyAgICAgICAgIGxldCB0ZW1wMiA9IG5ldyBEYXRlKHJlc3BvbnNlLmRhdGEuZW5kX3RpbWUpO1xuLy8gICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZW5kJywgdGVtcDIuZ2V0VGltZSgpICsgKHRlbXAyLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMCkpXG4vLyAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic3RhcnRcIiwgdGVtcDMuZ2V0VGltZSgpICsgKHRlbXAzLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMCkpO1xuLy8gICAgICAgICBsZXQgdGVtcCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbmQnKSAtIERhdGUubm93KCk7XG4vLyAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZGF5XCIsIHJlc3BvbnNlLmRhdGEuY3VycmVudF9kYXkpO1xuLy8gICAgICAgICB0aGlzLnNldFN0YXRlKHtcbi8vICAgICAgICAgICB2OiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbi8vICAgICAgICAgICAgIEFuc0FsZXJ0KDkpO1xuLy8gICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkYXknKSA9PT0gMykge1xuLy8gICAgICAgICAgICAgICBSb3V0ZXIucHVzaCgnL2ZpbmFsZScpXG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICBlbHNlIGlmKHJlc3BvbnNlLmRhdGEuZXJyb3Ipe1xuLy8gICAgICAgICAgICAgICBSb3V0ZXIucHVzaCgnL2Vycm9yJylcbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgIGVsc2Uge1xuLy8gICAgICAgICAgICAgICBSb3V0ZXIucHVzaCgnL2ZpbmFsZScpO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICAgIH0sIHRlbXApXG4vLyAgICAgICAgIH0pXG4vLyAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkYXk6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkYXknKSwgZW5kOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZW5kJykgfSwgKCkgPT4ge1xuLy8gICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGF5JykgPT0gMyAmJiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VuZCcpIDwgRGF0ZS5ub3coKSkpXG4vLyAgICAgICAgICAgICBSb3V0ZXIucHVzaCgnL2ZpbmFsZScpXG4vLyAgICAgICAgICAgaWYgKCEobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJlbWFpbFwiKSkpIHtcbi8vICAgICAgICAgICAgIEFuc0FsZXJ0KDgpXG4vLyAgICAgICAgICAgICBSb3V0ZXIucHVzaCgnLycpO1xuLy8gICAgICAgICAgIH1cbi8vICAgICAgICAgICBlbHNlIGlmICghKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzdGFydCcpIDw9IERhdGUubm93KCkpKSB7XG4vLyAgICAgICAgICAgICAvLyBBbnNBbGVydCg4KVxuLy8gICAgICAgICAgICAgUm91dGVyLnB1c2goXCIvXCIpO1xuLy8gICAgICAgICAgIH1cbi8vICAgICAgICAgICBlbHNlIHtcbi8vICAgICAgICAgICAgIHRoaXMuZ2V0UXVlc3Rpb25zKCk7XG4vLyAgICAgICAgICAgfVxuLy8gICAgICAgICB9KTtcbi8vICAgICAgIH0pXG4vLyAgICAgICAuY2F0Y2goZXJyID0+IHtcbi8vICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuLy8gICAgICAgICBSb3V0ZXIucHVzaCgnL2Vycm9yJylcbi8vICAgICAgIH0pO1xuLy8gICB9XG5cbi8vICAgZ2V0UXVlc3Rpb25zKCkge1xuLy8gICAgIGF4aW9zXG4vLyAgICAgICAuZ2V0KHByb2Nlc3MuZW52LmFwaSArIFwiL2FwaS9xdWVzdGlvblwiLCB7XG4vLyAgICAgICAgIGhlYWRlcnM6IHtcbi8vICAgICAgICAgICBBdXRob3JpemF0aW9uOiBcIkJlYXJlciBcIiArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidG9rZW5cIiksXG4vLyAgICAgICAgIH0sXG4vLyAgICAgICB9KVxuLy8gICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4vLyAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnF1aXpfZmluaXNoZWQpIHtcbi8vICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zdGF0ZS52KTtcbi8vICAgICAgICAgICBSb3V0ZXIucHVzaChcIi9maW5hbGVcIik7XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgdGhpcy5zZXRTdGF0ZSgocHJldlN0YXRlKSA9PiB7XG4vLyAgICAgICAgICAgcmV0dXJuIHtcbi8vICAgICAgICAgICAgIC4uLnByZXZTdGF0ZSxcbi8vICAgICAgICAgICAgIHF1ZXN0aW9uczogcmVzcG9uc2UuZGF0YS5xdWVzdGlvbixcbi8vICAgICAgICAgICAgIGhpbnQ6IHJlc3BvbnNlLmRhdGEuaGludCxcbi8vICAgICAgICAgICAgIHFzTm86IHJlc3BvbnNlLmRhdGEucXVlc3Rpb25fbm8sXG4vLyAgICAgICAgICAgICBhdWRpbzogcmVzcG9uc2UuZGF0YS5hdWRpbyxcbi8vICAgICAgICAgICAgIGltYWdlOiByZXNwb25zZS5kYXRhLmltYWdlXG4vLyAgICAgICAgICAgfTtcbi8vICAgICAgICAgfSk7XG4vLyAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcbi8vICAgICAgICAgd2luZG93LnNjcm9sbFRvKHtcbi8vICAgICAgICAgICB0b3A6IDAsXG4vLyAgICAgICAgICAgYmVoYXZpb3I6IFwic21vb3RoXCJcbi8vICAgICAgICAgfSk7XG4vLyAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBsb2FkZWQ6IHRydWUgfSk7XG4vLyAgICAgICB9KVxuLy8gICAgICAgLmNhdGNoKGVyciA9PiB7XG4vLyAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbi8vICAgICAgICAgUm91dGVyLnB1c2goJy9lcnJvcicpXG4vLyAgICAgICB9KTtcbi8vICAgfVxuXG4vLyAgIHN1Ym1pdCA9IChldmVudCkgPT4ge1xuLy8gICAgIC8vc2VuZCBmaW5hbCBhbnN3ZXIgZm9yIGNoZWNraW5nXG4vLyAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuLy8gICAgIHRoaXMuY2hlY2tBbnModGhpcy5zdGF0ZS5hbnN3ZXIpO1xuLy8gICAgIHRoaXMuc2V0U3RhdGUoKHByZXZTdGF0ZSkgPT4ge1xuLy8gICAgICAgcmV0dXJuIHsgLi4ucHJldlN0YXRlLCBhbnN3ZXI6IFwiXCIgfTtcbi8vICAgICB9KTtcbi8vICAgfTtcbi8vICAgLy8gc3VibWl0MiA9ICgpID0+IHtcbi8vICAgLy8gICAvL3NlbmQgZmluYWwgYW5zd2VyIGZvciBjaGVja2luZ1xuLy8gICAvLyAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdGUuYW5zd2VyKTtcbi8vICAgLy8gICB0aGlzLmNoZWNrQW5zKHRoaXMuc3RhdGUuYW5zd2VyKTtcbi8vICAgLy8gfTtcblxuLy8gICBjaGFuZ2UgPSAoZXZlbnQpID0+IHtcbi8vICAgICAvL2tlZXAgdXBkYXRpbmcgYW5zd2VyXG4vLyAgICAgbGV0IGUgPSBldmVudC50YXJnZXQudmFsdWU7XG4vLyAgICAgdGhpcy5zZXRTdGF0ZSgocHJldlN0YXRlKSA9PiB7XG4vLyAgICAgICByZXR1cm4geyAuLi5wcmV2U3RhdGUsIGFuc3dlcjogZSB9O1xuLy8gICAgIH0pO1xuLy8gICB9O1xuXG4vLyAgIGNoZWNrQW5zKFxuLy8gICAgIGFucyAvL2NoZWNrIGFuc3dlciBmcm9tIGFwaSBhbmQgc2VuZCBmb3IgY29ycmVjdCBhbGVydFxuLy8gICApIHtcbi8vICAgICBheGlvc1xuLy8gICAgICAgLnBvc3QoXG4vLyAgICAgICAgIHByb2Nlc3MuZW52LmFwaSArIFwiL2FwaS9jaGVja2Fuc3dlclwiLFxuLy8gICAgICAgICB7IGFuc3dlcjogYW5zIH0sXG4vLyAgICAgICAgIHtcbi8vICAgICAgICAgICBoZWFkZXJzOiB7XG4vLyAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBcIkJlYXJlciBcIiArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidG9rZW5cIiksXG4vLyAgICAgICAgICAgfSxcbi8vICAgICAgICAgfVxuLy8gICAgICAgKVxuLy8gICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4vLyAgICAgICAgIGxldCByID0gcmVzcG9uc2UuZGF0YS5yZXN1bHQ7XG4vLyAgICAgICAgIGlmIChyICYmICFyZXNwb25zZS5kYXRhLnF1aXpfZmluaXNoZWQpIHtcbi8vICAgICAgICAgICB0aGlzLnNldFN0YXRlKChwcmV2U3RhdGUpID0+IHtcbi8vICAgICAgICAgICAgIHJldHVybiB7IC4uLnByZXZTdGF0ZSwgcXNObzogcHJldlN0YXRlLnFzTm8gKyAxLCBhbnN3ZXI6IFwiXCIgfTtcbi8vICAgICAgICAgICB9KTtcbi8vICAgICAgICAgICBBbnNBbGVydCgxKTtcbi8vICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbi8vICAgICAgICAgICAgIGFuc3dlcjogXCJcIlxuLy8gICAgICAgICAgIH0pO1xuLy8gICAgICAgICAgIHRoaXMuZ2V0UXVlc3Rpb25zKCk7XG4vLyAgICAgICAgIH0gZWxzZSBpZiAociAmJiByZXNwb25zZS5kYXRhLnF1aXpfZmluaXNoZWQpIHtcbi8vICAgICAgICAgICBBbnNBbGVydCgxKTtcbi8vICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zdGF0ZS52KTtcbi8vICAgICAgICAgICBSb3V0ZXIucHVzaChcIi9maW5hbGVcIik7XG4vLyAgICAgICAgIH0gZWxzZSB7XG4vLyAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4vLyAgICAgICAgICAgICBhbnN3ZXI6IFwiXCJcbi8vICAgICAgICAgICB9KTtcbi8vICAgICAgICAgICBBbnNBbGVydCgwKTtcbi8vICAgICAgICAgfVxuLy8gICAgICAgfSk7XG4vLyAgIH1cblxuLy8gICByZW5kZXIoKSB7XG4vLyAgICAgcmV0dXJuIChcbi8vICAgICAgIDw+XG4vLyAgICAgICAgIHsgKHRoaXMuc3RhdGUubG9hZGVkID09PSB0cnVlKSA/XG4vLyAgICAgICAgICAgPExheW91dD5cbi8vICAgICAgICAgICAgIDxkaXZcbi8vICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IFwiYXV0b1wiLCBtYXJnaW5MZWZ0OiBcImF1dG9cIiwgdGV4dEFsaWduOiBcImNlbnRlclwiLCBtaW5IZWlnaHQ6IFwiMTAwdmgtMTAwcHhcIiB9fVxuLy8gICAgICAgICAgICAgICBxdWVzdGlvbnNcbi8vICAgICAgICAgICAgID5cbi8vICAgICAgICAgICAgICAgPFF1ZXN0aW9uIHFzPXt0aGlzLnN0YXRlLnF1ZXN0aW9uc30gcXNObz17dGhpcy5zdGF0ZS5xc05vfSBhdWRpbz17dGhpcy5zdGF0ZS5hdWRpb30gaW1hZ2U9e3RoaXMuc3RhdGUuaW1hZ2V9IGRheT17dGhpcy5zdGF0ZS5kYXl9IC8+XG4vLyAgICAgICAgICAgICAgIDxkaXY+XG4vLyAgICAgICAgICAgICAgICAgPEFuc3dlclxuLy8gICAgICAgICAgICAgICAgICAgY2hhbmdlPXt0aGlzLmNoYW5nZX1cbi8vICAgICAgICAgICAgICAgICAgIGFuc3dlcj17dGhpcy5zdGF0ZS5hbnN3ZXJ9XG4vLyAgICAgICAgICAgICAgICAgICBzdWJtaXQ9e3RoaXMuc3VibWl0fVxuLy8gICAgICAgICAgICAgICAgIC8+XG4vLyAgICAgICAgICAgICAgICAgPEhpbnQgaGludD17dGhpcy5zdGF0ZS5oaW50fVxuLy8gICAgICAgICAgICAgICAgICAgc3VibWl0PXt0aGlzLnN1Ym1pdH1cbi8vICAgICAgICAgICAgICAgICAvLyBzdWJtaXQyPXt0aGlzLnN1Ym1pdDJ9XG4vLyAgICAgICAgICAgICAgICAgLz5cbi8vICAgICAgICAgICAgICAgICA8c3R5bGUganN4PntgXG4vLyAgICAgICAgICAgICBkaXYge1xuLy8gICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4vLyAgICAgICAgICAgICAgIG1hcmdpbjogNXB4O1xuLy8gICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOjEwMHB4O1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICAgIGB9PC9zdHlsZT5cbi8vICAgICAgICAgICAgICAgPC9kaXY+XG4vLyAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmb290ZXJCdWZmJz5cblxuLy8gICAgICAgICAgICAgICA8L2Rpdj5cbi8vICAgICAgICAgICAgIDwvZGl2PlxuLy8gICAgICAgICAgIDwvTGF5b3V0PlxuLy8gICAgICAgICAgIDogPExvYWRlciAvPn1cbi8vICAgICAgIDwvPlxuLy8gICAgICk7XG4vLyAgIH1cbi8vIH1cbi8vIGV4cG9ydCBkZWZhdWx0IGdhbWU7XG5cbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBRdWVzdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9RdWVzdGlvblwiO1xuaW1wb3J0IEhpbnQgZnJvbSBcIi4uL2NvbXBvbmVudHMvSGludFwiO1xuaW1wb3J0IEFuc0FsZXJ0IGZyb20gXCIuLi9jb21wb25lbnRzL0Fuc0FsZXJ0XCI7XG5pbXBvcnQgQW5zd2VyIGZyb20gXCIuLi9jb21wb25lbnRzL0Fuc3dlclwiO1xuaW1wb3J0IFJvdXRlciBmcm9tIFwibmV4dC9yb3V0ZXJcIjtcbi8vIGltcG9ydCBkYXRhIGZyb20gJy4uL2Vudi5qc29uJztcbmltcG9ydCBMYXlvdXQgZnJvbSBcIi4uL2NvbXBvbmVudHMvTGF5b3V0XCI7XG5pbXBvcnQgTG9hZGVyIGZyb20gXCIuLi9jb21wb25lbnRzL0xvYWRlclwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnYW1lKCkge1xuICBcbiAgICBcbiAgICAgIGNvbnN0IFthbnN3ZXIsc2V0QW5zd2VyXT0gdXNlU3RhdGUoXCJcIiksXG4gICAgICBbcXVlc3Rpb25zLHNldFF1ZXN0aW9uc109dXNlU3RhdGUoXCJcIiksXG4gICAgICBbcXNObyxzZXRRc05vXT11c2VTdGF0ZSgxKSxcbiAgICAgIFthdWRpbyxzZXRBdWRpb109dXNlU3RhdGUoXCJcIiksXG4gICAgICBbaW1hZ2Usc2V0SW1hZ2VdPXVzZVN0YXRlKFwiXCIpLFxuICAgICAgW2lzTG9nZ2VkSW4sc2V0SXNMb2dnZWRJbl09dXNlU3RhdGUgKGZhbHNlKSxcbiAgICAgIFtoaW50LHNldEhpbnRdPXVzZVN0YXRlKFwiXCIpLFxuICAgICAgW2RheSxzZXREYXldPXVzZVN0YXRlKFwiXCIpLFxuICAgICAgW2VuZCxzZXRFbmRdPXVzZVN0YXRlKFwiXCIpLFxuICAgICAgW21lc3NhZ2Usc2V0TWVzc2FnZV09dXNlU3RhdGUoXCJcIiksXG4gICAgICBbdixzZXRWXT11c2VTdGF0ZShcIlwiKSxcbiAgICAgIFtsb2FkZWQsc2V0TG9hZGVkXT11c2VTdGF0ZShmYWxzZSlcbiAgICBcblxuICAgIC8vIHRoaXMuc3VibWl0ID0gdGhpcy5zdWJtaXQuYmluZCh0aGlzKTtcbiAgICAvLyB0aGlzLnN1Ym1pdDIgPSB0aGlzLnN1Ym1pdDIuYmluZCh0aGlzKTtcbiAgICAvLyB0aGlzLmNoYW5nZSA9IHRoaXMuY2hhbmdlLmJpbmQodGhpcyk7XG4gICAgLy8gdGhpcy5jaGVja0FucyA9IHRoaXMuY2hlY2tBbnMuYmluZCh0aGlzKTtcbiAgICAvLyB0aGlzLmdldFF1ZXN0aW9ucyA9IHRoaXMuZ2V0UXVlc3Rpb25zLmJpbmQodGhpcyk7XG5cblxuICAgICAgdXNlRWZmZWN0ICgoKSA9PiB7XG4gICAgYXhpb3NcbiAgICAgIC5nZXQocHJvY2Vzcy5lbnYuYXBpICsgXCIvYXBpL3N0YXR1c1wiKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHZhciB0ZW1wMyA9IG5ldyBEYXRlKHJlc3BvbnNlLmRhdGEuc3RhcnRfdGltZSk7XG4gICAgICAgIGxldCB0ZW1wMiA9IG5ldyBEYXRlKHJlc3BvbnNlLmRhdGEuZW5kX3RpbWUpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZW5kJywgdGVtcDIuZ2V0VGltZSgpICsgKHRlbXAyLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMCkpXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic3RhcnRcIiwgdGVtcDMuZ2V0VGltZSgpICsgKHRlbXAzLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMCkpO1xuICAgICAgICBsZXQgdGVtcCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbmQnKSAtIERhdGUubm93KCk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZGF5XCIsIHJlc3BvbnNlLmRhdGEuY3VycmVudF9kYXkpO1xuXG4gICAgICAgIC8vIHNldFYoc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vICAgICBBbnNBbGVydCg5KTtcbiAgICAgICAgLy8gICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGF5JykgPT09IDMpIHtcblxuICAgICAgICAvLyAgICAgICBSb3V0ZXIucHVzaCgnL2ZpbmFsZScpXG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vICAgICBlbHNlIGlmKHJlc3BvbnNlLmRhdGEuZXJyb3Ipe1xuICAgICAgICAvLyAgICAgICBSb3V0ZXIucHVzaCgnL2Vycm9yJylcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gICAgIGVsc2Uge1xuICAgICAgICAvLyAgICAgICBSb3V0ZXIucHVzaCgnL2ZpbmFsZScpO1xuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyAgIH0sIHRlbXApXG4gICAgICAgIC8vIClcblxuICAgICAgICAgc2V0RGF5KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkYXknKSkgXG4gICAgICAgICBzZXRFbmQobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VuZCcpKVxuICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGF5JykgPT0gMyAmJiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VuZCcpIDwgRGF0ZS5ub3coKSkpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJmaW5hbGVcIik7XG4gICAgICAgICAgICBSb3V0ZXIucHVzaCgnL2ZpbmFsZScpXG4gICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgaWYgKCEobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJlbWFpbFwiKSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiOVwiKTtcbiAgICAgICAgICAgIEFuc0FsZXJ0KDgpXG4gICAgICAgICAgICBSb3V0ZXIucHVzaCgnLycpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmICghKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzdGFydCcpIDw9IERhdGUubm93KCkpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIjhcIik7XG4gICAgICAgICAgICAvLyBBbnNBbGVydCg4KVxuICAgICAgICAgICAgUm91dGVyLnB1c2goXCIvXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGdldFF1ZXN0aW9ucygpO1xuICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICBSb3V0ZXIucHVzaCgnL2Vycm9yJylcbiAgICAgIH0pO1xuICB9LFtdKTtcblxuICBjb25zdCBnZXRRdWVzdGlvbnMgPSgpID0+IHtcbiAgICBcbiAgICBheGlvc1xuICAgICAgLmdldChwcm9jZXNzLmVudi5hcGkgKyBcIi9hcGkvcXVlc3Rpb25cIiwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogXCJCZWFyZXIgXCIgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRva2VuXCIpLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5xdWl6X2ZpbmlzaGVkKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHYpO1xuICAgICAgICAgIFJvdXRlci5wdXNoKFwiL2ZpbmFsZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgIHNldFF1ZXN0aW9ucyhyZXNwb25zZS5kYXRhLnF1ZXN0aW9ucyk7XG4gICAgICAgICAgICBzZXRIaW50KHJlc3BvbnNlLmRhdGEuaGludCk7XG4gICAgICAgICAgICBzZXRRc05vKHJlc3BvbnNlLmRhdGEucXVlc3Rpb25fbm8pO1xuICAgICAgICAgICAgc2V0QXVkaW8ocmVzcG9uc2UuZGF0YS5hdWRpbyk7XG4gICAgICAgICAgICBzZXRJbWFnZShyZXNwb25zZS5kYXRhLmltYWdlKTtcbiAgICAgICAgICBcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oe1xuICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICBiZWhhdmlvcjogXCJzbW9vdGhcIlxuICAgICAgICB9KTtcbiAgICAgICAgc2V0TG9hZGVkKHRydWUpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgIFJvdXRlci5wdXNoKCcvZXJyb3InKVxuICAgICAgfSlcbiAgICBcbiAgfVxuXG4gIGNvbnN0IHN1Ym1pdCA9IChldmVudCkgPT4ge1xuICAgIC8vc2VuZCBmaW5hbCBhbnN3ZXIgZm9yIGNoZWNraW5nXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNoZWNrQW5zKGFuc3dlcik7XG4gICAgc2V0QW5zd2VyKFwiXCIpXG4gIH07XG4gIC8vIHN1Ym1pdDIgPSAoKSA9PiB7XG4gIC8vICAgLy9zZW5kIGZpbmFsIGFuc3dlciBmb3IgY2hlY2tpbmdcbiAgLy8gICBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLmFuc3dlcik7XG4gIC8vICAgdGhpcy5jaGVja0Fucyh0aGlzLnN0YXRlLmFuc3dlcik7XG4gIC8vIH07XG5cbiAgY29uc3QgY2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgLy9rZWVwIHVwZGF0aW5nIGFuc3dlclxuICAgIGxldCBlID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgIHNldEFuc3dlcihlKVxuICB9O1xuICAvL2NoZWNrIGFuc3dlciBmcm9tIGFwaSBhbmQgc2VuZCBmb3IgY29ycmVjdCBhbGVydFxuICBjb25zdCBjaGVja0Fucz0oYW5zKT0+IHtcbiAgICBheGlvc1xuICAgICAgLnBvc3QoXG4gICAgICAgIHByb2Nlc3MuZW52LmFwaSArIFwiL2FwaS9jaGVja2Fuc3dlclwiLFxuICAgICAgICB7IGFuc3dlcjogYW5zIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBcIkJlYXJlciBcIiArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidG9rZW5cIiksXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGxldCByID0gcmVzcG9uc2UuZGF0YS5yZXN1bHQ7XG4gICAgICAgIGlmIChyICYmICFyZXNwb25zZS5kYXRhLnF1aXpfZmluaXNoZWQpIHtcbiAgICAgICAgICBzZXRRc05vKHFzTm8rMSk7XG4gICAgICAgICAgc2V0QW5zd2VyKFwiXCIpO1xuICAgICAgICAgIEFuc0FsZXJ0KDEpO1xuICAgICAgICAgIHNldEFuc3dlcihcIlwiKTtcbiAgICAgICAgICBnZXRRdWVzdGlvbnMoKTtcbiAgICAgICAgfSBcbiAgICAgICAgZWxzZSBpZiAociAmJiByZXNwb25zZS5kYXRhLnF1aXpfZmluaXNoZWQpIHtcbiAgICAgICAgICBBbnNBbGVydCgxKTtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodik7XG4gICAgICAgICAgUm91dGVyLnB1c2goXCIvZmluYWxlXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldEFuc3dlcihcIlwiKTtcbiAgICAgICAgICBBbnNBbGVydCgwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG5cblxuICBcbiAgICByZXR1cm4gKFxuICAgICAgPD5cbiAgICAgICAgeyAobG9hZGVkID09PSB0cnVlKSA/XG4gICAgICAgICAgPExheW91dD5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IFwiYXV0b1wiLCBtYXJnaW5MZWZ0OiBcImF1dG9cIiwgdGV4dEFsaWduOiBcImNlbnRlclwiLCBtaW5IZWlnaHQ6IFwiMTAwdmgtMTAwcHhcIiB9fVxuICAgICAgICAgICAgICBxdWVzdGlvbnNcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFF1ZXN0aW9uIHFzPXtxdWVzdGlvbnN9IHFzTm89e3FzTm99IGF1ZGlvPXthdWRpb30gaW1hZ2U9e2ltYWdlfSBkYXk9e2RheX0gLz5cbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8QW5zd2VyXG4gICAgICAgICAgICAgICAgICBjaGFuZ2U9e2NoYW5nZX1cbiAgICAgICAgICAgICAgICAgIGFuc3dlcj17YW5zd2VyfVxuICAgICAgICAgICAgICAgICAgc3VibWl0PXtzdWJtaXR9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8SGludCBoaW50PXtoaW50fVxuICAgICAgICAgICAgICAgICAgc3VibWl0PXtzdWJtaXR9XG4gICAgICAgICAgICAgICAgLy8gc3VibWl0Mj17dGhpcy5zdWJtaXQyfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAgICAgZGl2IHtcbiAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgICBtYXJnaW46IDVweDtcbiAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbToxMDBweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBgfTwvc3R5bGU+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZm9vdGVyQnVmZic+XG5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L0xheW91dD5cbiAgICAgICAgICA6IDxMb2FkZXIgLz59XG4gICAgICA8Lz5cbiAgICApXG4gICAgICAgICAgXG4gICAgICAgICAgfSJdfQ== */\\n/*@ sourceURL=/home/ruchika/Desktop/TDOC/Screencast/pages/game.js */\")), __jsx(\"div\", {\n    className: \"footerBuff\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 15\n    }\n  }))) : __jsx(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 13\n    }\n  }));\n}","map":{"version":3,"sources":["/home/ruchika/Desktop/TDOC/Screencast/pages/game.js"],"names":["axios","React","useState","useEffect","Question","Hint","AnsAlert","Answer","Router","Layout","Loader","game","answer","setAnswer","questions","setQuestions","qsNo","setQsNo","audio","setAudio","image","setImage","isLoggedIn","setIsLoggedIn","hint","setHint","day","setDay","end","setEnd","message","setMessage","v","setV","loaded","setLoaded","get","process","env","api","then","response","temp3","Date","data","start_time","temp2","end_time","localStorage","setItem","getTime","getTimezoneOffset","temp","getItem","now","current_day","console","log","push","getQuestions","catch","err","headers","Authorization","quiz_finished","clearTimeout","question_no","window","scrollTo","top","behavior","submit","event","preventDefault","checkAns","change","e","target","value","ans","post","r","result","marginRight","marginLeft","textAlign","minHeight"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,Q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","sourcesContent":["// import axios from \"axios\";\n// import React from \"react\";\n// import Question from \"../components/Question\";\n// import Hint from \"../components/Hint\";\n// import AnsAlert from \"../components/AnsAlert\";\n// import Answer from \"../components/Answer\";\n// import Router from \"next/router\";\n// import data from '../env.json';\n// import Layout from \"../components/Layout\";\n// import Loader from \"../components/Loader\";\n\n// class game extends React.Component {\n//   constructor(props) {\n//     super(props);\n//     this.state = {\n//       answer: \"\",\n//       questions: \"\",\n//       qsNo: 1,\n//       audio: \"\",\n//       image: \"\",\n//       isLoggedIn: false,\n//       hint: \"\",\n//       day: \"\",\n//       end: \"\",\n//       message: \"\",\n//       v: \"\",\n//       loaded: false,\n//     };\n\n//     this.submit = this.submit.bind(this);\n//     // this.submit2 = this.submit2.bind(this);\n//     this.change = this.change.bind(this);\n//     this.checkAns = this.checkAns.bind(this);\n//     this.getQuestions = this.getQuestions.bind(this);\n//   }\n\n//   componentDidMount() {\n//     axios\n//       .get(process.env.api + \"/api/status\")\n//       .then((response) => {\n//         var temp3 = new Date(response.data.start_time);\n//         let temp2 = new Date(response.data.end_time);\n//         localStorage.setItem('end', temp2.getTime() + (temp2.getTimezoneOffset() * 60000))\n//         localStorage.setItem(\"start\", temp3.getTime() + (temp3.getTimezoneOffset() * 60000));\n//         let temp = localStorage.getItem('end') - Date.now();\n//         localStorage.setItem(\"day\", response.data.current_day);\n//         this.setState({\n//           v: setTimeout(function () {\n//             AnsAlert(9);\n//             if (localStorage.getItem('day') === 3) {\n//               Router.push('/finale')\n//             }\n//             else if(response.data.error){\n//               Router.push('/error')\n//             }\n//             else {\n//               Router.push('/finale');\n//             }\n//           }, temp)\n//         })\n//         this.setState({ day: localStorage.getItem('day'), end: localStorage.getItem('end') }, () => {\n//           if (localStorage.getItem('day') == 3 && (localStorage.getItem('end') < Date.now()))\n//             Router.push('/finale')\n//           if (!(localStorage.getItem(\"email\"))) {\n//             AnsAlert(8)\n//             Router.push('/');\n//           }\n//           else if (!(localStorage.getItem('start') <= Date.now())) {\n//             // AnsAlert(8)\n//             Router.push(\"/\");\n//           }\n//           else {\n//             this.getQuestions();\n//           }\n//         });\n//       })\n//       .catch(err => {\n//         console.log(err)\n//         Router.push('/error')\n//       });\n//   }\n\n//   getQuestions() {\n//     axios\n//       .get(process.env.api + \"/api/question\", {\n//         headers: {\n//           Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n//         },\n//       })\n//       .then((response) => {\n//         if (response.data.quiz_finished) {\n//           clearTimeout(this.state.v);\n//           Router.push(\"/finale\");\n//         }\n//         this.setState((prevState) => {\n//           return {\n//             ...prevState,\n//             questions: response.data.question,\n//             hint: response.data.hint,\n//             qsNo: response.data.question_no,\n//             audio: response.data.audio,\n//             image: response.data.image\n//           };\n//         });\n//         window.scrollTo(0, 0);\n//         window.scrollTo({\n//           top: 0,\n//           behavior: \"smooth\"\n//         });\n//         this.setState({ loaded: true });\n//       })\n//       .catch(err => {\n//         console.log(err)\n//         Router.push('/error')\n//       });\n//   }\n\n//   submit = (event) => {\n//     //send final answer for checking\n//     event.preventDefault()\n//     this.checkAns(this.state.answer);\n//     this.setState((prevState) => {\n//       return { ...prevState, answer: \"\" };\n//     });\n//   };\n//   // submit2 = () => {\n//   //   //send final answer for checking\n//   //   console.log(this.state.answer);\n//   //   this.checkAns(this.state.answer);\n//   // };\n\n//   change = (event) => {\n//     //keep updating answer\n//     let e = event.target.value;\n//     this.setState((prevState) => {\n//       return { ...prevState, answer: e };\n//     });\n//   };\n\n//   checkAns(\n//     ans //check answer from api and send for correct alert\n//   ) {\n//     axios\n//       .post(\n//         process.env.api + \"/api/checkanswer\",\n//         { answer: ans },\n//         {\n//           headers: {\n//             Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n//           },\n//         }\n//       )\n//       .then((response) => {\n//         let r = response.data.result;\n//         if (r && !response.data.quiz_finished) {\n//           this.setState((prevState) => {\n//             return { ...prevState, qsNo: prevState.qsNo + 1, answer: \"\" };\n//           });\n//           AnsAlert(1);\n//           this.setState({\n//             answer: \"\"\n//           });\n//           this.getQuestions();\n//         } else if (r && response.data.quiz_finished) {\n//           AnsAlert(1);\n//           clearTimeout(this.state.v);\n//           Router.push(\"/finale\");\n//         } else {\n//           this.setState({\n//             answer: \"\"\n//           });\n//           AnsAlert(0);\n//         }\n//       });\n//   }\n\n//   render() {\n//     return (\n//       <>\n//         { (this.state.loaded === true) ?\n//           <Layout>\n//             <div\n//               style={{ marginRight: \"auto\", marginLeft: \"auto\", textAlign: \"center\", minHeight: \"100vh-100px\" }}\n//               questions\n//             >\n//               <Question qs={this.state.questions} qsNo={this.state.qsNo} audio={this.state.audio} image={this.state.image} day={this.state.day} />\n//               <div>\n//                 <Answer\n//                   change={this.change}\n//                   answer={this.state.answer}\n//                   submit={this.submit}\n//                 />\n//                 <Hint hint={this.state.hint}\n//                   submit={this.submit}\n//                 // submit2={this.submit2}\n//                 />\n//                 <style jsx>{`\n//             div {\n//               text-align: center;\n//               margin: 5px;\n//               margin-bottom:100px;\n//             }\n//           `}</style>\n//               </div>\n//               <div className='footerBuff'>\n\n//               </div>\n//             </div>\n//           </Layout>\n//           : <Loader />}\n//       </>\n//     );\n//   }\n// }\n// export default game;\n\nimport axios from \"axios\";\nimport React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport Question from \"../components/Question\";\nimport Hint from \"../components/Hint\";\nimport AnsAlert from \"../components/AnsAlert\";\nimport Answer from \"../components/Answer\";\nimport Router from \"next/router\";\n// import data from '../env.json';\nimport Layout from \"../components/Layout\";\nimport Loader from \"../components/Loader\";\n\nexport default function game() {\n  \n    \n      const [answer,setAnswer]= useState(\"\"),\n      [questions,setQuestions]=useState(\"\"),\n      [qsNo,setQsNo]=useState(1),\n      [audio,setAudio]=useState(\"\"),\n      [image,setImage]=useState(\"\"),\n      [isLoggedIn,setIsLoggedIn]=useState (false),\n      [hint,setHint]=useState(\"\"),\n      [day,setDay]=useState(\"\"),\n      [end,setEnd]=useState(\"\"),\n      [message,setMessage]=useState(\"\"),\n      [v,setV]=useState(\"\"),\n      [loaded,setLoaded]=useState(false)\n    \n\n    // this.submit = this.submit.bind(this);\n    // this.submit2 = this.submit2.bind(this);\n    // this.change = this.change.bind(this);\n    // this.checkAns = this.checkAns.bind(this);\n    // this.getQuestions = this.getQuestions.bind(this);\n\n\n      useEffect (() => {\n    axios\n      .get(process.env.api + \"/api/status\")\n      .then((response) => {\n        var temp3 = new Date(response.data.start_time);\n        let temp2 = new Date(response.data.end_time);\n        localStorage.setItem('end', temp2.getTime() + (temp2.getTimezoneOffset() * 60000))\n        localStorage.setItem(\"start\", temp3.getTime() + (temp3.getTimezoneOffset() * 60000));\n        let temp = localStorage.getItem('end') - Date.now();\n        localStorage.setItem(\"day\", response.data.current_day);\n\n        // setV(setTimeout(function () {\n        //     AnsAlert(9);\n        //     if (localStorage.getItem('day') === 3) {\n\n        //       Router.push('/finale')\n        //     }\n        //     else if(response.data.error){\n        //       Router.push('/error')\n        //     }\n        //     else {\n        //       Router.push('/finale');\n        //     }\n        //   }, temp)\n        // )\n\n         setDay(localStorage.getItem('day')) \n         setEnd(localStorage.getItem('end'))\n          if (localStorage.getItem('day') == 3 && (localStorage.getItem('end') < Date.now())){\n            console.log(\"finale\");\n            Router.push('/finale')\n          }\n            \n          if (!(localStorage.getItem(\"email\"))) {\n            console.log(\"9\");\n            AnsAlert(8)\n            Router.push('/');\n          }\n          else if (!(localStorage.getItem('start') <= Date.now())) {\n            console.log(\"8\");\n            // AnsAlert(8)\n            Router.push(\"/\");\n          }\n          else {\n            getQuestions();\n          }\n        \n        })\n      .catch(err => {\n        console.log(err)\n        Router.push('/error')\n      });\n  },[]);\n\n  const getQuestions =() => {\n    \n    axios\n      .get(process.env.api + \"/api/question\", {\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n        },\n      })\n      .then((response) => {\n        if (response.data.quiz_finished) {\n          clearTimeout(v);\n          Router.push(\"/finale\");\n        }\n        \n            setQuestions(response.data.questions);\n            setHint(response.data.hint);\n            setQsNo(response.data.question_no);\n            setAudio(response.data.audio);\n            setImage(response.data.image);\n          \n        window.scrollTo(0, 0);\n        window.scrollTo({\n          top: 0,\n          behavior: \"smooth\"\n        });\n        setLoaded(true);\n      })\n      .catch(err => {\n        console.log(err)\n        Router.push('/error')\n      })\n    \n  }\n\n  const submit = (event) => {\n    //send final answer for checking\n    event.preventDefault()\n    checkAns(answer);\n    setAnswer(\"\")\n  };\n  // submit2 = () => {\n  //   //send final answer for checking\n  //   console.log(this.state.answer);\n  //   this.checkAns(this.state.answer);\n  // };\n\n  const change = (event) => {\n    //keep updating answer\n    let e = event.target.value;\n    setAnswer(e)\n  };\n  //check answer from api and send for correct alert\n  const checkAns=(ans)=> {\n    axios\n      .post(\n        process.env.api + \"/api/checkanswer\",\n        { answer: ans },\n        {\n          headers: {\n            Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n          },\n        }\n      )\n      .then((response) => {\n        let r = response.data.result;\n        if (r && !response.data.quiz_finished) {\n          setQsNo(qsNo+1);\n          setAnswer(\"\");\n          AnsAlert(1);\n          setAnswer(\"\");\n          getQuestions();\n        } \n        else if (r && response.data.quiz_finished) {\n          AnsAlert(1);\n          clearTimeout(v);\n          Router.push(\"/finale\");\n        } else {\n          setAnswer(\"\");\n          AnsAlert(0);\n        }\n      });\n  };\n\n\n  \n    return (\n      <>\n        { (loaded === true) ?\n          <Layout>\n            <div\n              style={{ marginRight: \"auto\", marginLeft: \"auto\", textAlign: \"center\", minHeight: \"100vh-100px\" }}\n              questions\n            >\n              <Question qs={questions} qsNo={qsNo} audio={audio} image={image} day={day} />\n              <div>\n                <Answer\n                  change={change}\n                  answer={answer}\n                  submit={submit}\n                />\n                <Hint hint={hint}\n                  submit={submit}\n                // submit2={this.submit2}\n                />\n                <style jsx>{`\n            div {\n              text-align: center;\n              margin: 5px;\n              margin-bottom:100px;\n            }\n          `}</style>\n              </div>\n              <div className='footerBuff'>\n\n              </div>\n            </div>\n          </Layout>\n          : <Loader />}\n      </>\n    )\n          \n          }"]},"metadata":{},"sourceType":"module"}